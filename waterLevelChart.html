<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>WaterlevelIndicator</title>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
    <script src="http://code.highcharts.com/highcharts.js" type="text/javascript"></script>
    <script src="http://code.highcharts.com/modules/exporting.js" type="text/javascript"></script>
    <script src="http://d3js.org/d3.v3.min.js" language="JavaScript"></script>
    <script src="liquidFillGauge.js" language="JavaScript"></script>
    <script type="text/javascript">
    $(function () {
    $('#container').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: 'Resorvoir Conditions (Ending at midnight - Nov 11, 2015)'
        },
        xAxis: {
            categories: ['Trinity Lake', 'Shasta Resorvoir', 'Lake Oroville', 'Folsom Lake', 'New Melones', 'Don Pedro Resorvoir', 'Exchequer Resorvoir', 'San Luis Resorvoir', 'Millerton Resorvoir', 'Pine Flat Resorvoir', 'Perris Lake','Castaic Lake']
        },
        yAxis: {
            min: 0,
            max: 4552,
            title: {
                text: 'Capacity (TAF)'
            }
        },
        tooltip: {
            pointFormat: '<span style="color:{series.color:}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
            shared: true
        },
        plotOptions: {
            column: {
                grouping: false
            }
        },
        series: [{
           name: '% of Capacity',
            data: [2488, 4552, 3538, 950, 2400, 2030, 1025, 2039, 520, 1000, 200, 325]
        }, {
            name: '% of Historical Ave',
            data: [700, 1000, 1400, 200, 1200, 950, 350, 600, 260, 500, 40, 100]
        }]
    });
});
</script>
    <style>
        .liquidFillGaugeText { font-family: Helvetica; font-weight: bold; }
    </style>
</head>
<body>
    <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
  <br><br><br>
  <div id="chart-container">

<svg id="fillgauge1" width="8%" height="100" onclick="gauge1.update(NewValue());"></svg>
<svg id="fillgauge2" width="8%" height="100" onclick="gauge2.update(NewValue());"></svg>
<svg id="fillgauge3" width="8%" height="100" onclick="gauge3.update(NewValue());"></svg>
<svg id="fillgauge4" width="8%" height="100" onclick="gauge4.update(NewValue());"></svg>
<svg id="fillgauge5" width="8%" height="100" onclick="gauge5.update(NewValue());"></svg>
<svg id="fillgauge6" width="8%" height="100" onclick="gauge6.update(NewValue());"></svg>
<svg id="fillgauge7" width="8%" height="100" onclick="gauge7.update(NewValue());"></svg>
<svg id="fillgauge8" width="8%" height="100" onclick="gauge8.update(NewValue());"></svg>
<svg id="fillgauge9" width="8%" height="100" onclick="gauge9.update(NewValue());"></svg>
<svg id="fillgauge10" width="8%" height="100" onclick="gauge10.update(NewValue());"></svg>
<svg id="fillgauge11" width="8%" height="100" onclick="gauge11.update(NewValue());"></svg>
<svg id="fillgauge12" width="8%" height="100" onclick="gauge12.update(NewValue());"></svg>
</div>
<br><br><br>

<script language="JavaScript">

    
        var a = Math.floor(Math.random()*(2488+1)*0.02);
        var b = Math.floor(Math.random()*(4552+1)*0.02);
        var c = Math.floor(Math.random()*(3538+1)*0.02);
        var d = Math.floor(Math.random()*(950+1)*0.02);
        var e = Math.floor(Math.random()*(2400+1)*0.02);
        var f = Math.floor(Math.random()*(2030+1)*0.02);
        var g = Math.floor(Math.random()*(1025+1)*0.02);
        var h = Math.floor(Math.random()*(2039+1)*0.02);
        var i = Math.floor(Math.random()*(520+1)*0.02);
        var j = Math.floor(Math.random()*(1000+1)*0.02);
        var k = Math.floor(Math.random()*(200+1)*0.02);
        var l = Math.floor(Math.random()*(325+1)*0.02);

    var gauge1 = loadLiquidFillGauge("fillgauge1", a);
    var config1 = liquidFillGaugeDefaultSettings();
    
    var gauge2 = loadLiquidFillGauge("fillgauge2", b);
    var config2 = liquidFillGaugeDefaultSettings();

    var gauge3 = loadLiquidFillGauge("fillgauge3", c);
    var config3 = liquidFillGaugeDefaultSettings();

    var gauge4 = loadLiquidFillGauge("fillgauge4", d);
    var config4 = liquidFillGaugeDefaultSettings();

    var gauge5 = loadLiquidFillGauge("fillgauge5", e);
    var config5 = liquidFillGaugeDefaultSettings();

    var gauge6 = loadLiquidFillGauge("fillgauge6", f);
    var config6 = liquidFillGaugeDefaultSettings();
    
    var gauge7 = loadLiquidFillGauge("fillgauge7", g);
    var config7 = liquidFillGaugeDefaultSettings();

    var gauge8 = loadLiquidFillGauge("fillgauge8", h);
    var config8 = liquidFillGaugeDefaultSettings();

    var gauge9 = loadLiquidFillGauge("fillgauge9", i);
    var config9 = liquidFillGaugeDefaultSettings();

    var gauge10 = loadLiquidFillGauge("fillgauge10", j);
    var config10 = liquidFillGaugeDefaultSettings();

    var gauge11 = loadLiquidFillGauge("fillgauge11", k);
    var config11 = liquidFillGaugeDefaultSettings();

    var gauge12 = loadLiquidFillGauge("fillgauge12", l);
    var config12 = liquidFillGaugeDefaultSettings();

    
    function NewValue(){
        if(Math.random() > .5){
            return Math.round(Math.random()*100);
        } else {
            return (Math.random()*100).toFixed(1);
    }
    }

    setInterval(function() { updateData(); }, 3000);

    function updateData(){
        var chart1 = $('#container').highcharts();
        var a = Math.floor(Math.random()*(2488+1));
        var b = Math.floor(Math.random()*(4552+1));
        var c = Math.floor(Math.random()*(3538+1));
        var d = Math.floor(Math.random()*(950+1));
        var e = Math.floor(Math.random()*(2400+1));
        var f = Math.floor(Math.random()*(2030+1));
        var g = Math.floor(Math.random()*(1025+1));
        var h = Math.floor(Math.random()*(2039+1));
        var i = Math.floor(Math.random()*(520+1));
        var j = Math.floor(Math.random()*(1000+1));
        var k = Math.floor(Math.random()*(200+1));
        var l = Math.floor(Math.random()*(325+1));
        chart1.series[1].setData([a, b, c, d, e, f, g, h, i, j, k, l]);

              
    }

</script>
</body>
</html>